<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>MiddleGround</title>
    </head>
    <body>
        <p>Home Page</p>
        <a href="/API%20Test/api.html">API Test page</a>
    <div id="auth"></div>
<script>
  async function renderAuth() {
    const res = await fetch('/api/me');
    const data = await res.json();
    const el = document.getElementById('auth');
    if (data.user) {
      el.innerHTML = '<p>Signed in as <b>' + data.user.username + '</b></p><button id="logoutBtn">Log out</button>';
      document.getElementById('logoutBtn').onclick = async () => {
        await fetch('/api/logout', { method: 'POST' });
        location.reload();
      };
    } else {
      el.innerHTML = '<p><a href="/login.html">Log in</a> or <a href="/signup.html">Sign up</a></p>';
    }
  }
  renderAuth();
</script>
</body>
</html>